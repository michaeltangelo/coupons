(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},168:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(34),o=a.n(s),c=(a(102),a(10)),i=a(11),l=a(14),u=a(12),p=a(15),m=a(56),h=a.n(m),d=a(45),f=a(24),g=Object(f.createMuiTheme)({palette:{type:"light"},typography:{useNextVariants:!0}}),b=(a(168),a(23)),v=a.n(b),E=a(28),w=a(95),k=a(236),j=a(233),O=a(235),y=a(31),C=Object(y.a)();var x=function(e){return C.push("/secret"),null},S=a(32),N=a.n(S),T=a(22),B=a.n(T),P=a(35),I=a(29),A=a.n(I),D=a(81),R=a.n(D),L=a(82),z=a.n(L),J=a(84),M=a.n(J),W=a(83),_=a.n(W),F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={redeemed:!1,revealClicked:0},a.handleButtonClick=a.handleButtonClick.bind(Object(P.a)(Object(P.a)(a))),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleButtonClick",value:function(){this.setState({revealClicked:this.state.revealClicked+1}),this.state.revealClicked>=1&&this.setState({redeemed:!0})}},{key:"generateButtonText",value:function(){switch(this.state.revealClicked){case 0:return"Redeem Coupon";case 1:return"Press to Confirm";default:return"Redeemed"}}},{key:"_renderButton",value:function(e){return this.state.redeemed?r.a.createElement(A.a,{onClick:this.handleButtonClick,className:e.claimButton,variant:"contained",size:"small",color:"primary",disabled:!0},this.generateButtonText()):r.a.createElement(A.a,{onClick:this.handleButtonClick,className:e.claimButton,variant:"contained",size:"small",color:"primary"},this.generateButtonText())}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.title,n=e.description;return r.a.createElement(R.a,{className:t.card},r.a.createElement(z.a,{title:a}),r.a.createElement(_.a,{className:t.content},r.a.createElement(B.a,{component:"p"},n)),r.a.createElement(M.a,{className:t.actions},this._renderButton(t)))}}]),t}(n.Component),q=Object(f.withStyles)(function(e){return{card:{marginTop:24,padding:12},content:{},media:{padding:20,objectFit:"cover"},actions:{marginTop:50},claimButton:{width:"100%",height:50}}})(F),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={coupons:null},a.fetchCoupons=Object(E.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/coupons");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=9;break}throw console.log("throwing error"),Error(a.message);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)})),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.cookies;this.fetchCoupons().then(function(t){e.setState({coupons:t.coupons})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(B.a,null,"Our state: ".concat(this.state.coupons)),r.a.createElement(N.a,{className:e.grid,container:!0,spacing:16},r.a.createElement(N.a,{item:!0,xs:12,sm:6,className:e.gridItemRight},r.a.createElement(q,{title:"bob",description:"awpeofjawepf"})),r.a.createElement(N.a,{item:!0,xs:12,sm:6,className:e.gridItemLeft},r.a.createElement(q,null)),r.a.createElement(N.a,{item:!0,xs:12,sm:6,className:e.gridItemRight},r.a.createElement(q,null)),r.a.createElement(N.a,{item:!0,xl:12,className:e.gridItemLeft},r.a.createElement(q,null))))}}]),t}(n.Component),$=Object(f.withTheme)()(Object(f.withStyles)(function(e){return{root:{spacing:24,padding:"0 ".concat(3*e.spacing.unit,"px")},grid:{width:"100%",direction:"row",alignItems:"center",justify:"flex-end"},gridItemRight:{},gridItemLeft:{}}})(V)),G=a(85),H=a(87),K=a.n(H),Q=a(86),U=a.n(Q),X=a(57),Y=a.n(X),Z=a(90),ee=a.n(Z),te=a(92),ae=a.n(te),ne=a(91),re=a.n(ne),se=a(89),oe=a.n(se),ce=a(88),ie=a.n(ce),le=a(42),ue=a.n(le),pe=a(6),me=a.n(pe),he=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",loading:!1,success:!1},a.componentDidMount=function(e){a.props.authed&&e.onAuthSuccess("")},a.onSubmitClicked=function(e){e.preventDefault(),a.state.loading||a.setState({loading:!0}),""!==a.state.password&&a.authenticate(a.state.password).then(function(e){var t="ok"===e.message;a.setState({loading:!1,success:t}),t&&a.props.onAuthSuccess(e.sessionToken)}).catch(function(e){console.log(e),a.setState({loading:!1})})},a.authenticate=function(){var e=Object(E.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/authenticate",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({password:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.onPasswordTextChanged=function(e){a.setState({password:e.target.value})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.success;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null),r.a.createElement("main",{className:this.props.classes.layout},r.a.createElement(ue.a,{className:this.props.classes.paper},r.a.createElement("div",{className:this.props.classes.wrapper},r.a.createElement(K.a,{className:this.props.classes.avatar},a?r.a.createElement(ie.a,null):r.a.createElement(oe.a,null)),t&&r.a.createElement(Y.a,{size:50,className:this.props.classes.fabProgress})),r.a.createElement(B.a,{component:"h3",variant:"h5"},"Password Required"),r.a.createElement("form",{onSubmit:this.onSubmitClicked,className:this.props.classes.form},r.a.createElement(ee.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(re.a,{htmlFor:"password"},"Password"),r.a.createElement(ae.a,{onChange:this.onPasswordTextChanged,name:"password",type:"password",id:"password",autoComplete:"current-password"})),r.a.createElement("div",{className:this.props.classes.wrapper},r.a.createElement(A.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:this.props.classes.submit,disabled:t},"Enter"),t&&r.a.createElement(Y.a,{size:24,className:this.props.classes.buttonProgress}))))))}}]),t}(n.Component),de=me()(function(e){return{layout:Object(G.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},fabProgress:{position:"absolute",top:3,left:3,zIndex:1},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:0,marginLeft:-12},wrapper:{margin:e.spacing.unit,position:"relative"}}})(he);function fe(e){var t=e.component,a=e.authed,n=Object(w.a)(e,["component","authed"]),s=n.componentExtraProps;return r.a.createElement(k.a,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,Object.assign({},e,s)):r.a.createElement(j.a,{to:{pathname:"/secret",state:{from:e.location}}})}}))}var ge=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={authed:!1,loading:!1},a.verifyTokenStatus=function(){var e=Object(E.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/verifyToken",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({userToken:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=9;break}throw console.log("throwing error"),Error(n.message);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a._onAuthSuccessCallback=function(e){if(""!==e){var t=a.props.cookies;a.setState({authed:!0});var n=new Date;n.setDate(n.getDate()+1),t.set("sessionToken",e,{path:"/",expires:n})}C.push("/home")},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.cookies.get("sessionToken");void 0!==t&&this.verifyTokenStatus(t).then(function(t){e.setState({authed:"ok"===t.message}),C.push("/home")}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement(O.a,null,r.a.createElement(k.a,{path:"/secret",render:function(){return r.a.createElement(de,{authed:e.state.authed,onAuthSuccess:e._onAuthSuccessCallback})}}),r.a.createElement(fe,{authed:this.state.authed,path:"/home",componentExtraProps:{cookies:this.props.cookies},component:$}),r.a.createElement(k.a,{component:x}))}}]),t}(n.Component),be=Object(d.b)(ge),ve=a(93),Ee=a.n(ve),we=a(94),ke=a.n(we),je=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ee.a,{position:"static"},r.a.createElement(ke.a,null,r.a.createElement(B.a,{variant:"h5",color:"inherit"},"Natangelo's Coupon Composium"))))}}]),t}(n.Component),Oe=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(h.a,{theme:g},r.a.createElement(je,null),r.a.createElement(be,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ye=a(234);o.a.render(r.a.createElement(ye.a,{history:C},r.a.createElement(Oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,a){e.exports=a(232)}},[[97,2,1]]]);
//# sourceMappingURL=main.406a1d81.chunk.js.map